<!DOCTYPE html>
<head>
  <meta charset="utf-8"/>
</head>
<body>
  <script>
    var canvas = document.createElement("CANVAS");
    var context = canvas.getContext("2d");

    setContext(context); // measure width and height

    // measure text width and height based on context
    let metrics = context.measureText("H");
    let actualLeft = metrics.actualBoundingBoxLeft;
    let actualRight = metrics.actualBoundingBoxRight;
    let actualTop = metrics.actualBoundingBoxAscent;
    let actualBottom = metrics.actualBoundingBoxDescent;
    
    // setting width or height resets canvas context
    context.canvas.width = actualLeft + actualRight;
    context.canvas.height = actualTop + actualBottom;
    setContext(context); // canvas context was reset
    
    // fit to canvas starting from topleft corner
    context.fillText("H",actualLeft,actualTop);
    document.body.appendChild(canvas);

    function setContext(context) {
	// canvas context settings
	context.font = "30px Arial";
	context.fillStyle = "black";
	context.textBaseline = "top";
    }

    // TODO: Chrome laskee leveyden väärin
  </script>
</body>
